
# תוכנית: הוספת שדה CVV בטופס הוספת כרטיס אשראי

## הבעיה שזוהתה

בדף הלקוחות (`Customers.tsx`) חסר שדה CVV בטופס הוספת כרטיס אשראי:
- קיימים שדות: מספר כרטיס, תוקף
- חסר: CVV (3 ספרות)
- הקוד הנוכחי שולח `cvv: '000'` כערך קבוע, מה שגורם לכשלון בשמירת הכרטיס

## הפתרון

הוספת שדה CVV לטופס ולמשתנה `formData`.

## שינויים נדרשים

### קובץ: `src/pages/Customers.tsx`

#### 1. הוספת שדה CVV ל-formData (שורה 40-48)
```javascript
const [formData, setFormData] = useState({
  name: '',
  phone: '',
  address: '',
  email: '',
  notes: '',
  creditCard: '',
  creditCardExpiry: '',
  cvv: '',  // שדה חדש
});
```

#### 2. איפוס שדה CVV ב-resetForm (שורה 56-67)
הוספת `cvv: ''` לאיפוס הטופס.

#### 3. עדכון הקריאה ל-Pelecard (שורה 132)
שינוי מ:
```javascript
cvv: '000', // Placeholder
```
ל:
```javascript
cvv: formData.cvv,
```

#### 4. הוספת שדה CVV ל-UI (אחרי שדה התוקף, שורה 289)
יצירת שדה קלט נוסף עבור CVV עם הגבלה ל-3-4 תווים.

## מבנה ה-UI המעודכן

```text
+----------------------------------+
|        כרטיס אשראי (אופציונלי)    |
+----------------------------------+
| מספר כרטיס    | תוקף (MMYY)       |
| [____________] | [____]           |
+----------------------------------+
|              CVV                 |
|             [___]                |
+----------------------------------+
```

או פריסה בשורה אחת:

```text
+----------------------------------+
|        כרטיס אשראי (אופציונלי)    |
+----------------------------------+
| מספר כרטיס  | תוקף    | CVV      |
| [__________]| [____]  | [___]   |
+----------------------------------+
```

## אבטחה

- שדה CVV יהיה מסוג `password` או `text` עם `inputMode="numeric"`
- CVV לא נשמר בשום מקום - נשלח רק לפלאקארד לאימות
- מקסימום 4 תווים (רוב הכרטיסים 3, אמריקן אקספרס 4)
